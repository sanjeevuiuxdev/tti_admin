{
    "sourceFile": "src/pages/Categories.jsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 2,
            "patches": [
                {
                    "date": 1762268908593,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1762269637618,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,65 +1,4 @@\n-import { useEffect, useState } from \"react\";\n-import { api } from \"../api/client\";\n-import Topbar from \"../components/Topbar\";\n-\n export default function Categories() {\n-  const [items, setItems] = useState([]);\n-  const [name, setName] = useState(\"\");\n-  const [metaTitle, setMT] = useState(\"\");\n-  const [metaDescription, setMD] = useState(\"\");\n-  const [loading, setL] = useState(false);\n-\n-  async function load() {\n-    const { data } = await api.get(\"/api/categories\");\n-    setItems(data);\n+    return <div style={{padding:16}}><h2>Categories</h2></div>;\n   }\n-  useEffect(() => { load(); }, []);\n-\n-  async function createCat(e) {\n-    e.preventDefault();\n-    if (!name.trim()) return;\n-    setL(true);\n-    await api.post(\"/api/categories\", { name, metaTitle, metaDescription });\n-    setName(\"\"); setMT(\"\"); setMD(\"\");\n-    await load();\n-    setL(false);\n-  }\n-\n-  async function remove(id) {\n-    if (!confirm(\"Delete category?\")) return;\n-    await api.delete(`/api/categories/${id}`);\n-    await load();\n-  }\n-\n-  return (\n-    <>\n-      <Topbar/>\n-      <div className=\"page\">\n-        <h2>Categories</h2>\n-\n-        <form onSubmit={createCat} className=\"card\">\n-          <input placeholder=\"Name\" value={name} onChange={e=>setName(e.target.value)} />\n-          <input placeholder=\"Meta Title\" value={metaTitle} onChange={e=>setMT(e.target.value)} />\n-          <input placeholder=\"Meta Description\" value={metaDescription} onChange={e=>setMD(e.target.value)} />\n-          <button disabled={loading}>{loading ? \"Saving...\" : \"Create\"}</button>\n-        </form>\n-\n-        <table className=\"table\">\n-          <thead><tr><th>Name</th><th>Slug</th><th>Actions</th></tr></thead>\n-          <tbody>\n-            {items.map(c=>(\n-              <tr key={c._id}>\n-                <td>{c.name}</td>\n-                <td>{c.slug}</td>\n-                <td>\n-                  {/* keep it simple: only delete for now */}\n-                  <button onClick={()=>remove(c._id)}>Delete</button>\n-                </td>\n-              </tr>\n-            ))}\n-          </tbody>\n-        </table>\n-      </div>\n-    </>\n-  );\n-}\n+  \n\\ No newline at end of file\n"
                },
                {
                    "date": 1762276053148,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,4 +1,86 @@\n+import { useEffect, useState } from \"react\";\n+import { api } from \"../api/client\";\n+import Topbar from \"../components/Topbar\";\n+\n\\ No newline at end of file\n export default function Categories() {\n-    return <div style={{padding:16}}><h2>Categories</h2></div>;\n+  const [items, setItems] = useState([]);\n+  const [form, setForm] = useState({ name: \"\", metaTitle: \"\", metaDescription: \"\" });\n+  const [editingId, setEditingId] = useState(null);\n+  const [loading, setLoading] = useState(false);\n+\n+  async function load() {\n+    const { data } = await api.get(\"/api/categories\");\n+    setItems(data);\n   }\n-  \n+  useEffect(() => { load(); }, []);\n+\n+  async function create(e) {\n+    e.preventDefault();\n+    if (!form.name.trim()) return;\n+    setLoading(true);\n+    await api.post(\"/api/categories\", form);\n+    setForm({ name: \"\", metaTitle: \"\", metaDescription: \"\" });\n+    await load();\n+    setLoading(false);\n+  }\n+\n+  async function startEdit(cat) {\n+    setEditingId(cat._id);\n+    setForm({ name: cat.name, metaTitle: cat.metaTitle || \"\", metaDescription: cat.metaDescription || \"\" });\n+  }\n+\n+  async function saveEdit() {\n+    if (!editingId) return;\n+    await api.put(`/api/categories/${editingId}`, form);\n+    setEditingId(null);\n+    setForm({ name: \"\", metaTitle: \"\", metaDescription: \"\" });\n+    await load();\n+  }\n+\n+  async function remove(id) {\n+    if (!confirm(\"Delete category?\")) return;\n+    await api.delete(`/api/categories/${id}`);\n+    await load();\n+  }\n+\n+  return (\n+    <>\n+      <Topbar/>\n+      <div className=\"page\">\n+        <h2>Categories</h2>\n+\n+        <form onSubmit={create} className=\"card\" style={{maxWidth:600}}>\n+          <strong>{editingId ? \"Editing category\" : \"Create new category\"}</strong>\n+          <input placeholder=\"Name *\" value={form.name} onChange={e=>setForm(s=>({...s, name:e.target.value}))}/>\n+          <input placeholder=\"Meta Title\" value={form.metaTitle} onChange={e=>setForm(s=>({...s, metaTitle:e.target.value}))}/>\n+          <input placeholder=\"Meta Description\" value={form.metaDescription} onChange={e=>setForm(s=>({...s, metaDescription:e.target.value}))}/>\n+          {editingId ? (\n+            <div style={{display:\"flex\",gap:8}}>\n+              <button type=\"button\" onClick={()=>{setEditingId(null); setForm({name:\"\",metaTitle:\"\",metaDescription:\"\"});}}>Cancel</button>\n+              <button type=\"button\" onClick={saveEdit} style={{background:\"#111\",color:\"#fff\"}}>Save</button>\n+            </div>\n+          ) : (\n+            <button disabled={loading} style={{background:\"#111\",color:\"#fff\"}}>{loading?\"Saving...\":\"Create\"}</button>\n+          )}\n+        </form>\n+\n+        <table className=\"table\" style={{marginTop:16}}>\n+          <thead><tr><th>Name</th><th>Slug</th><th>SEO Title</th><th>Actions</th></tr></thead>\n+          <tbody>\n+            {items.map(c=>(\n+              <tr key={c._id}>\n+                <td>{c.name}</td>\n+                <td>{c.slug}</td>\n+                <td>{c.metaTitle || \"-\"}</td>\n+                <td>\n+                  <button onClick={()=>startEdit(c)}>Edit</button>\n+                  <button onClick={()=>remove(c._id)} style={{marginLeft:8}}>Delete</button>\n+                </td>\n+              </tr>\n+            ))}\n+          </tbody>\n+        </table>\n+      </div>\n+    </>\n+  );\n+}\n"
                }
            ],
            "date": 1762268908593,
            "name": "Commit-0",
            "content": "import { useEffect, useState } from \"react\";\nimport { api } from \"../api/client\";\nimport Topbar from \"../components/Topbar\";\n\nexport default function Categories() {\n  const [items, setItems] = useState([]);\n  const [name, setName] = useState(\"\");\n  const [metaTitle, setMT] = useState(\"\");\n  const [metaDescription, setMD] = useState(\"\");\n  const [loading, setL] = useState(false);\n\n  async function load() {\n    const { data } = await api.get(\"/api/categories\");\n    setItems(data);\n  }\n  useEffect(() => { load(); }, []);\n\n  async function createCat(e) {\n    e.preventDefault();\n    if (!name.trim()) return;\n    setL(true);\n    await api.post(\"/api/categories\", { name, metaTitle, metaDescription });\n    setName(\"\"); setMT(\"\"); setMD(\"\");\n    await load();\n    setL(false);\n  }\n\n  async function remove(id) {\n    if (!confirm(\"Delete category?\")) return;\n    await api.delete(`/api/categories/${id}`);\n    await load();\n  }\n\n  return (\n    <>\n      <Topbar/>\n      <div className=\"page\">\n        <h2>Categories</h2>\n\n        <form onSubmit={createCat} className=\"card\">\n          <input placeholder=\"Name\" value={name} onChange={e=>setName(e.target.value)} />\n          <input placeholder=\"Meta Title\" value={metaTitle} onChange={e=>setMT(e.target.value)} />\n          <input placeholder=\"Meta Description\" value={metaDescription} onChange={e=>setMD(e.target.value)} />\n          <button disabled={loading}>{loading ? \"Saving...\" : \"Create\"}</button>\n        </form>\n\n        <table className=\"table\">\n          <thead><tr><th>Name</th><th>Slug</th><th>Actions</th></tr></thead>\n          <tbody>\n            {items.map(c=>(\n              <tr key={c._id}>\n                <td>{c.name}</td>\n                <td>{c.slug}</td>\n                <td>\n                  {/* keep it simple: only delete for now */}\n                  <button onClick={()=>remove(c._id)}>Delete</button>\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n    </>\n  );\n}\n"
        }
    ]
}